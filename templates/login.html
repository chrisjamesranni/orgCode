{% extends "layout1.html" %}

{% block title %}Login{% endblock %}

{% block content %}
<div class="modern-auth-container">
    <div class="login-content">
        <div class="brand-section">
            <h1>GeoGuard</h1>
            <p class="tagline">Intelligent Flood & Landslide Prediction</p>
        </div>

        <div class="auth-section">
            <h2>Welcome Back</h2>
            <p class="subtitle">Log in to access prediction tools</p>

            <form method="POST" action="" class="modern-form" id="login-form">
                {{ form.hidden_tag() }}

                <div class="form-group {% if form.email.errors %}has-error{% endif %}">
                    {{ form.email(class="modern-input", placeholder="Email Address") }}
                    {% if form.email.errors %}
                        <div class="error-message">
                            {% for error in form.email.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group {% if form.password.errors %}has-error{% endif %}">
                    <div class="password-input-group">
                        {{ form.password(class="modern-input", placeholder="Password") }}
                        <button type="button" class="toggle-password" aria-label="Toggle password visibility">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    {% if form.password.errors %}
                        <div class="error-message">
                            {% for error in form.password.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-options">
                    <div class="remember-me">
                        {{ form.remember(class="remember-checkbox") }}
                        {{ form.remember.label }}
                    </div>
                    <a href="{{ url_for('reset_request') }}" class="forgot-link">Forgot Password?</a>
                </div>

                {{ form.submit(class="login-button") }}
            </form>

            <div class="auth-footer">
                <p>Don't have an account? <a href="{{ url_for('signup') }}">Sign Up</a></p>
            </div>
        </div>
    </div>

    <div class="features-grid">
        <div class="feature-card">
            <i class="fas fa-shield-alt"></i>
            <h3>Real-time Monitoring</h3>
            <p>Live data tracking for enhanced safety</p>
        </div>
        <div class="feature-card">
            <i class="fas fa-bell"></i>
            <h3>Early Warnings</h3>
            <p>Instant alerts for potential risks</p>
        </div>
        <div class="feature-card">
            <i class="fas fa-map-marked-alt"></i>
            <h3>Risk Mapping</h3>
            <p>Advanced geospatial analytics</p>
        </div>
    </div>
</div>
{% endblock %}

{% block additional_scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const togglePassword = document.querySelector('.toggle-password');
        const passwordInput = document.querySelector('input[type="password"]');

        togglePassword.addEventListener('click', function() {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            this.querySelector('i').classList.toggle('fa-eye');
            this.querySelector('i').classList.toggle('fa-eye-slash');
        });
    });
</script>
{% endblock %}